"use strict";var s=Object.defineProperty;var l=Object.getOwnPropertyDescriptor;var u=Object.getOwnPropertyNames;var E=Object.prototype.hasOwnProperty;var d=(e,t)=>{for(var n in t)s(e,n,{get:t[n],enumerable:!0})},v=(e,t,n,p)=>{if(t&&typeof t=="object"||typeof t=="function")for(let r of u(t))!E.call(e,r)&&r!==n&&s(e,r,{get:()=>t[r],enumerable:!(p=l(t,r))||p.enumerable});return e};var A=e=>v(s({},"__esModule",{value:!0}),e);var b={};d(b,{default:()=>_});module.exports=A(b);var m=require("knex");var f=require("dotenv"),o=require("zod"),g={app:".env",test:".env.test"}[process.env.NODE_ENV||"app"];(0,f.config)({path:g});var x=o.z.object({NODE_ENV:o.z.enum(["development","test","production"]).default("production"),PORT:o.z.coerce.number().default(3e3),DATABASE_CLIENT:o.z.enum(["better-sqlite3"]).default("better-sqlite3"),DATABASE_URL:o.z.string().default("/database/db.sqlite"),COOKIE_SECRET:o.z.string().default("secret"),COOKIE_EXPIRES_IN_MINUTES:o.z.coerce.number().default(60*24*7)}),a=x.safeParse(process.env);if(!a.success){let e="Invalid environment variables";throw console.error(e,a.error.format()),new Error(e)}var i=a.data;var c={client:i.DATABASE_CLIENT,connection:{filename:i.DATABASE_URL},useNullAsDefault:!0,migrations:{extension:"ts",directory:"./database/migrations"}},D=(0,m.knex)(c);var _=c;
